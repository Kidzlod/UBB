-- DHL - UBB Script (Mobile-PC)
-- Made with ❤️ for bro

local player = game.Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")
local rs = game:GetService("ReplicatedStorage")

-- GUI chính
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Nút mở menu
local OpenButton = Instance.new("TextButton")
OpenButton.Parent = ScreenGui
OpenButton.BackgroundColor3 = Color3.fromRGB(0,0,0)
OpenButton.TextColor3 = Color3.fromRGB(255,255,255)
OpenButton.Font = Enum.Font.GothamBold
OpenButton.Text = "DHL"
OpenButton.TextScaled = true
OpenButton.Size = UDim2.new(0,60,0,60)
OpenButton.Position = UDim2.new(0.05,0,0.4,0)
OpenButton.Active = true
OpenButton.Draggable = true
OpenButton.BorderSizePixel = 0
local UICornerOpen = Instance.new("UICorner",OpenButton)
UICornerOpen.CornerRadius = UDim.new(1,0)

-- Frame chính
local MenuFrame = Instance.new("Frame")
MenuFrame.Parent = ScreenGui
MenuFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
MenuFrame.Size = UDim2.new(0,260,0,360)
MenuFrame.Position = UDim2.new(0.05,0,0.2,0)
MenuFrame.Visible = false
MenuFrame.Active = true
MenuFrame.Draggable = true
local UICornerFrame = Instance.new("UICorner",MenuFrame)
UICornerFrame.CornerRadius = UDim.new(0,12)

-- Viền 7 màu
local UIStrokeFrame = Instance.new("UIStroke",MenuFrame)
UIStrokeFrame.Thickness = 2
task.spawn(function()
    local hue = 0
    while task.wait(0.05) do
        hue = (hue + 1) % 360
        UIStrokeFrame.Color = Color3.fromHSV(hue/360,1,1)
    end
end)

-- Tab container
local TabFolder = Instance.new("Folder",MenuFrame)

-- Thanh chọn tab
local TabBar = Instance.new("Frame",MenuFrame)
TabBar.BackgroundTransparency = 1
TabBar.Size = UDim2.new(1,0,0,40)

-- Nội dung tab
local ContentFrame = Instance.new("Frame",MenuFrame)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Size = UDim2.new(1,0,1,-40)
ContentFrame.Position = UDim2.new(0,0,0,40)

-- Hàm tạo tab
local Tabs = {}
local function CreateTab(name)
    local Button = Instance.new("TextButton",TabBar)
    Button.BackgroundColor3 = Color3.fromRGB(30,30,30)
    Button.Size = UDim2.new(0,120,1,0)
    Button.Font = Enum.Font.GothamBold
    Button.Text = name
    Button.TextColor3 = Color3.fromRGB(255,255,255)
    Button.TextScaled = true
    local Page = Instance.new("ScrollingFrame",ContentFrame)
    Page.Visible = false
    Page.Size = UDim2.new(1,0,1,0)
    Page.CanvasSize = UDim2.new(0,0,0,600)
    Page.BackgroundTransparency = 1
    Page.ScrollBarThickness = 4
    Tabs[name] = {Button=Button,Page=Page}
    Button.MouseButton1Click:Connect(function()
        for _,t in pairs(Tabs) do
            t.Page.Visible = false
        end
        Page.Visible = true
    end)
    return Page
end

-- Tạo tab chính
local MainPage = CreateTab("Main")
local SettingPage = CreateTab("Setting")
Tabs["Main"].Button.Position = UDim2.new(0,0,0,0)
Tabs["Setting"].Button.Position = UDim2.new(0,120,0,0)
Tabs["Main"].Page.Visible = true

-- Hàm tạo nút
local function CreateButton(parent,text,callback)
    local btn = Instance.new("TextButton",parent)
    btn.Size = UDim2.new(1,-10,0,40)
    btn.Position = UDim2.new(0,5,0,#parent:GetChildren()*45)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.Text = text
    btn.Font = Enum.Font.GothamBold
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.TextScaled = true
    btn.MouseButton1Click:Connect(callback)
end

-- ====================
-- Nút trong Main
-- ====================
CreateButton(MainPage,"All Char",function()
    local left = player.PlayerGui.MainUI.StoreFrame.Content.Passes.Content.Left
    for _,obj in pairs(left:GetChildren()) do
        if obj:IsA("TextButton") or obj:IsA("ImageButton") then
            local args = {obj.Name,0.001}
            rs.UIRemotes.AstroPurchase:FireServer(unpack(args))
            local args2 = {obj.Name,{Coins=1}}
            rs.UIRemotes.Craft:FireServer(unpack(args2))
        end
    end
    for _,obj in pairs(rs:WaitForChild("Morphshow"):GetChildren()) do
        local args = {obj.Name,0.001}
        rs.UIRemotes.AstroPurchase:FireServer(unpack(args))
        local args2 = {obj.Name,{Coins=1}}
        rs.UIRemotes.Craft:FireServer(unpack(args2))
    end
end)

CreateButton(MainPage,"Delete Night/Rain",function()
    local gfx = rs:WaitForChild("Assets"):WaitForChild("GRAPHIC")
    for _,name in pairs({"night","rain"}) do
        local item = gfx:FindFirstChild(name)
        if item then item:Destroy() end
    end
end)

-- ====================
-- Nút trong Setting
-- ====================
local HitboxEnabled = false
local HitboxSize = 100
CreateButton(SettingPage,"Toggle Hitbox",function()
    HitboxEnabled = not HitboxEnabled
end)

-- Textbox chỉnh Hitbox
local TextBox = Instance.new("TextBox",SettingPage)
TextBox.Size = UDim2.new(1,-10,0,40)
TextBox.Position = UDim2.new(0,5,0,#SettingPage:GetChildren()*45)
TextBox.BackgroundColor3 = Color3.fromRGB(40,40,40)
TextBox.Text = tostring(HitboxSize)
TextBox.Font = Enum.Font.GothamBold
TextBox.TextColor3 = Color3.fromRGB(255,255,255)
TextBox.TextScaled = true
TextBox.FocusLost:Connect(function()
    local num = tonumber(TextBox.Text)
    if num then HitboxSize = num end
end)

-- ESP Toggle
local ESPEnabled = false
CreateButton(SettingPage,"ESP On/Off",function()
    ESPEnabled = not ESPEnabled
end)

-- ====================
-- Hitbox logic
-- ====================
game:GetService("RunService").RenderStepped:Connect(function()
    if HitboxEnabled then
        for _,plr in pairs(game.Players:GetPlayers()) do
            if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = plr.Character.HumanoidRootPart
                hrp.Size = Vector3.new(HitboxSize,HitboxSize,HitboxSize)
                hrp.Transparency = 0.7
                hrp.BrickColor = BrickColor.new("Really blue")
                hrp.Material = "Neon"
                hrp.CanCollide = false
            end
        end
    end
end)

-- ESP logic
local function CreateESP(plr)
    local Billboard = Instance.new("BillboardGui")
    Billboard.Adornee = plr.Character:WaitForChild("Head")
    Billboard.Size = UDim2.new(0,200,0,50)
    Billboard.AlwaysOnTop = true
    local Label = Instance.new("TextLabel",Billboard)
    Label.Size = UDim2.new(1,0,1,0)
    Label.BackgroundTransparency = 1
    Label.Font = Enum.Font.GothamBold
    Label.TextColor3 = Color3.fromRGB(255,0,0)
    Label.TextScaled = true
    Label.Text = plr.Name
    Billboard.Parent = plr.Character
    plr.Character:WaitForChild("Humanoid").HealthChanged:Connect(function()
        if ESPEnabled then
            local mag = (player.Character.HumanoidRootPart.Position - plr.Character.HumanoidRootPart.Position).Magnitude
            Label.Text = plr.Name.." | HP:"..math.floor(plr.Character.Humanoid.Health).." | "..math.floor(mag).."m"
        else
            Label.Text = ""
        end
    end)
end
game.Players.PlayerAdded:Connect(function(plr)
    plr.CharacterAdded:Connect(function()
        if ESPEnabled then
            task.wait(1)
            CreateESP(plr)
        end
    end)
end)

-- Toggle menu
local MenuOpen = false
OpenButton.MouseButton1Click:Connect(function()
    MenuOpen = not MenuOpen
    MenuFrame.Visible = MenuOpen
end)
